<html>
<head>
    <link href="../resources/css/doc-style.css" media="all" rel="stylesheet" type="text/css" />
    <script src="../resources/js/jff5neq.js" type="text/javascript"></script>
    <script type="text/javascript">
        try{Typekit.load();}catch(e){}
    </script>
    <script src="../resources/js/jquery.min.js"></script>
    <script src="../resources/js/vkbeautify.js"></script>
    <script src="../resources/js/getAppValues.js"></script>

    <title>Concur Provisioning</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div class="header clearfix">
    <div class="logo-container">
        <img src="../resources/img/okta-logo-white.png" alt="Okta" />
    </div>
</div>
<div class="okta-instructions">

    <div id="loginAdminApp" class="okta-callout okta-error" style="display: none;"><span class="icon-24 icon-error"></span>
        <p>To reconfigure any of the <strong>General Settings</strong> or <strong>Sign-On Options</strong>, uncheck the <strong>Enable provisioning features</strong> box, and use the <strong>Previous</strong> and <strong>Next</strong> buttons to navigate through the configuration screens.</p>
    </div>


    <h1>Configuring Provisioning for Concur</h1>

    <p>This guide provides the steps required to configure Provisioning for Concur.</p>

    <div class="okta-callout okta-warning"><span class="icon-24 icon-warning"></span>

        <p><strong>Notes</strong></p>

        <ul>
            <li>
                <p>Okta supports the creation of a Base user record in Concur. Contact the Concur implementation staff to determine whether your Concur tenant uses <strong>Expense</strong> features that require employee data that is not capable of being populated by the current <em>User API</em> and therefore is not supported by the Okta User Provisioning application. If this is the case, you are required to populate the additional data using Concur specified import files.</p>
                <p>The fields that can be populated by the User Provisioning app are specified:
                    <a href="https://developer.concur.com/api-reference/user/company-notification-subscription-resource/user.html#createUser">here</a>.</p>
        </ul>
    </div>

    <h2>Contents</h2>

    <ul>
        <li><a href="#editions">Support of Concur Editions</a></li>
        <li><a href="#features">Features</a></li>
        <li><a href="#requirements">Requirements</a></li>
        <li><a href="#configuration">Configuration Steps</a></li>
        <li><a href="#schema">Schema Discovery</a></li>
        <li><a href="#tips">Troubleshooting Tips</a></li>
        <li><a href="#Migration">Migration from Legacy Concur Application to Universal Directory</a></li>
    </ul>
    <hr>





    <a name="editions"></a><h2>Support of Concur Editions</h2>
    <ul>
        <li><p><strong>Small Business</strong>:</p>
            <p>The Okta-Concur integration does not support the Concur Small Business Edition.</p>
        </li>
        <li><p><strong>Standard Edtion</strong>:</p>
            <p>Okta supports provisioning functionality for Concur Standard Edition. Note that Okta only creates a base user record in Concur. Standard Edition clients that are not using extended features can use the User Provisioning app to add records without having to import additional data. However, even some Standard Edition features require additional file imports or manually added information in Concur by the client.</p>

        </li>
        <li><p><strong>Professional Edition</strong></p>
            <p>Okta supports provisioning functionality for Concur Professional Edition. Note that Okta only creates a base user record in Concur; you may require file imports for attributes (such as employee banking data) not supported by the Concur API. Many <strong>Expense</strong> features require employee data that User Provisioning applications cannot populate since the current <em>User API</em> does not currently include those features.</p>
        </li>
        <li><p><strong>Premium Edition</strong>:
            <p>Okta supports provisioning functionality for Concur Premium Edition. Note that Okta only creates a base user record in Concur; you may require file imports for attributes (such as employee banking data) not supported by the Concur API. Many <strong>Expense</strong> features require employee data that User Provisioning applications cannot populate since the current <em>User API</em> does not currently include those features.</p>
            </p></li>

        <h3>Determining Edition Type</h3>
        <p>A client can determine the Concur Edition type by having their administrator login to their Concur site. If they see a <strong>Setup</strong> menu with a sub option for <strong>Expense</strong> within the <strong>Administration</strong> menu (as shown below), then this is a Standard Edition site. If the client administrator does not see the <strong>Expense</strong> menu within the <strong>Setup</strong> menu, then they have a Concur Professional Edition site:</p>

        <p><p><img src="images/apps/concurnew1.png" alt="concurnew1.png" /></p>



    </ul>
    <hr>

    <a name="features"></a><h2>Features</h2>
    <p>The following provisioning features are supported:</p>
    <ul>
        <li><p><strong>Schema Discovery</strong></p></li>
        <li><p><strong>Create Users</strong></p>
            <p>Note that Okta only creates a user’s base profile in Concur.</p></li>
        <li><p><strong>Update User Attributes</strong></p></li>
        <li><p><strong>Deactivate Users</strong></p></li>
        <li><p><strong>Sync Password</strong></p></li>
    </ul>
    <p><strong>Note</strong>: Import of Users is currently supported only in CSV format.</p>

    <hr>

    <a name="requirements"></a><h2>Requirements</h2>
    <ul>

        <li><p><strong>Letter of Authorization (LOA)</strong>: Concur requires a letter of authorization before you can start using Okta for provisioning. If you are implementing Provisioning, or for Provisioning plus Single Sign On (SSO):</p>
            <p>Download the following document, sign it, and scan the signed copy into a pdf file.</p>
            <p><kbd><a href="images/apps/Okta_LOA.pdf" target="_blank">Concur Letter of Authorization - Provisioning or Provisioning plus SSO</a></kbd></p>

            <p>Click the link below to generate a Provisioning Enablement Request email to Concur. Fill in the fields and attach the LOA.</p>
            <p><kbd><a href="mailto:concur_saml_activation@okta.com,partner_client_activation@concur.com?Subject=Provisioning%20Enablement%20Request&Body=Please%20enable%09provisioning%20for%20the%20following%20account.%20The%20signed%20letter%20of%20authorization%20is%20attached.%0A%0ACompany%09Name%3A%0A%0AUser%20Name%3A%0A%0AEmail%3A%0A%0APhone%20%28optional%29%3A%0A%0AThank%20you.">Provisioning Enablement Email</a></kbd></p>
            <p><strong>Note: </strong>If the above link does not generate an email message on your system, open this <a href="images/apps/Concur_Email_Alternate.pdf" target="_blank">Email Text</a> and copy and paste the information into a new email message.</p>



        </li>

        <li><p>Universal Directory for Concur is an <strong>Early Access</strong> feature. If you would like to turn on UD for Concur, contact Okta Support to enable the following feature flag: <strong>PROV_CONCUR_CLOUD_DIRECTORY_ENABLE</strong>.</p></li>

        <li>You must have Concur <strong>Expense</strong> service enabled. That is, Concur <strong>Travel</strong> only is not supported.</p></li>

        <li>Before setting up provisioning, ensure that Web Services subscription is enabled for your Concur tenant. Contact Concur to get the Web Services Administrator Profile set up; this is a one-time required set up. Once the subscription is enabled, you will be able to use the provisioning application in your <strong>Concur Production</strong> tenant. The Okta application is listed globally in Concur Production environment, and no further steps need to be taken to enable the Okta application in you Concur Web Services App center.
            If you are in the <strong>Concur Sandbox</strong> environment, follow the steps below to enable the Okta application in Concur:</p></li>
    </ul>

    <ol>
        <li><p>Login to Concur (commonly, <a href="https://www.concursolutions.com" target="_blank">https://www.concursolutions.com</a>) with your Concur Admin account.</p></li>
        <li><p>Navigate to <strong>Administration > Company > Web Services</strong>.</p>
            <p><p><img src="images/apps/concur1.png" alt=“concur1.png" /></p></li>
        <li><p>Navigate to <strong>Enable Partner Application</strong>, then find <strong>Okta</strong> in the list and make sure it is <strong>Enabled</strong>.</p>
            <p><strong>Note</strong>: Contact Concur to enable the Okta application for your Concur tenant if the application does not appear in the Web Services section.</p>

            <p><p><img src="images/apps/concur2.png" alt=“concur2.png" /></p></li>
        <hr>
    </ol>

    <a name="configuration"></a><h2>Configuration Steps</h2>
    <ol>

        <li><p>Configure your <strong>Provisioning</strong> settings for Concur as follows:</p>
            <ul>
                <li><p>Check the <strong>Enable provisioning features</strong> box.</p></li>
                <li><p>In the <strong>API Authentication</strong> section, click <strong>Authenticate with Concur</strong>:</p>
                    <p><p><img src="images/apps/concur4.png" alt=“concur4.png" /></p></li>

                </li>
                <li><p>A new window will appear displaying the Concur login page. Enter your Concur Admin credentials and log in.</p></li>

                <li><p>A new window will appear displaying the Concur login page. Enter your Concur Admin credentials and log in.</p></li>

                <li><p>A message will appear with option to allow Okta to connect to your tenant. Choose <strong>Allow</strong> for provisioning to work.</p>
                    <p><p><img src="images/apps/concurnew.png" alt=“concurnew.png" /></p></li>

                </li>


                <li><p>Now your app is authenticated, scroll down the Provisioning page and select those provisioning features you want to enable:</p>
                    <p><p><img src="images/apps/concur5.png" alt=“concur.png" /></p></li>

                </li>
                <li><p>Click <strong>Next</strong>.</p></li>

            </ul>
        <li><p>You can now assign people to the app (if needed) and finish the application setup.</p></li>

        <li><p>The required attributes in Concur depend on your Concur tenant settings. Follow the steps bellow to add all required user attributes to the user profile:</p>

            <ul>

                <li><p>In Okta, from the Admin dashboard, select <strong>Directory > Profile Editor</strong>.</p></li>

                <li><p>Select the <strong>APPS</strong> section in the left navigation bar, then find your app in the list.</p>
                    <p><p><img src="images/apps/concur6.png" alt=“concur6.png" /></p></li>

                </li>
                <li><p>Select <strong>Add Attribute</strong>, then <strong>Refresh Attribute List</strong> to see the latest list of Concur attributes:</p>
                    <p><p><img src="images/apps/concur7.png" alt=“concur7.png" /></p></li>

                <li><p>Make sure that all attributes with the <strong>Required attribute</strong> in the description is selected. Additionally, you can add more attributes of your choice.</p></li>
                <li><p><strong>Save</strong> the profile.</p></li>


                </li>

                <li><p>Setup is now complete.</p></li>


            </ul>
        </li>

        <h3>Attributes in Base Profile</h3>

        <p>There are few special attributes in Base user profile, whose values may vary depending on your Concur Edition. Pay special attention to these attributes:</p>
        <ul>
            <li><p><strong>Locale Name</strong></p>
                <p>Select value from drop down menu.</p></li>
            </li>
            <li><p><strong>Country Code</strong></p>
                <p>Select value from drop down menu.</p></li>
            </li>
            <li><p><strong>Currency Key</strong></p>
                <p>Select value from drop down menu.</p></li>

            <li><p><strong>Expense Group ID</strong></p>
                <p>Concur Standard edition may or may not have groups. This attribute is termed as Expense Policy Group in Concur Standard Edition, and Custom21 will be used for the Expense Group value. You have to pass the Group Code value; to get a list of Group code values pertaining to the group names, go to the <strong>Accounting Administration</strong> menu in Concur, then click on <strong>Accounting Structure</strong>.</p>
                <p>Concur Professional/Premium edition has groups. Custom21 will be used for the Expense Group value. Custom 22 will be used for the Invoice Group value. You have to pass the Group Code value; to get a list of Group code values pertaining to the group names, go to <strong>Accounting Administration</strong> menu in Concur, then click on <strong>Accounting Structure</strong>.</p>
            </li>

            <li><p><strong>Ledger Key</strong></p>
                <p>For Concur Standard Edition, the value default to be passed is <strong>DEFAULT</strong>. Although this attribute does not appear in your Concur UI, but is required for provisioning. </p>
                <p>For Concur Professional/Premium Edition, the Ledger code(s) must be obtained from Concur since the Code is not available in the API and it is not exposed to the client administrator in the Concur UI (<strong>Accounting Administration</strong> menu). You will have to maintain the list of Ledger codes, and plug them in Okta when assigning new users. Contact Concur at <a href="mailto:pdspe@concur.com" target="_blank">pdspe@concur.com</a> to obtain a list of valid Ledger Code(s) relevant to your Concur tenant.</p></li>
        </ul>
        <p>For these attributes Concur has a pre-defined list of allowed values per tenant, and you will experience errors if you use a wrong value. So make sure you know what to enter here. See the <strong>Schema Discovery </strong>section to see how to get allowed values.</p>

        <br />
    </ol>
    <hr>
    <a name="schema"></a><h2>Schema Discovery</h2>



    <p>This application supports Schema Discovery feature, which allows to extend the list of attributes to sync with Concur. Some attributes are restricted by Concur to allow values only from a predefined list. Due to API limitation we cannot get these values. Such attributes have the following note in their description: <em>The valid values for this field are restricted and configured in Concur</em>.</p>
    <p><img src="images/apps/concur8.png" alt=“concur8.png" /></p>

    <p>To get a list of allowed values for these attributes, go to Concur web-site, navigate to the <strong>Add User</strong> form and check the values for the selected field.</p>
    <p>Here's an example for <strong>Expense Group ID</strong> attribute:</p>
    <p><img src="images/apps/concur9.png" alt=“concur9.png" /></p>
    <hr>

    <a name="tips"></a><h2>Troubleshooting Tips</h2>



    <p>Most common errors are:</p>
    <ul>
        <li><p>Concur's required field was not added to the User profile or had an empty value:</p>
            <p><img src="images/apps/concur10.png" alt=“concur10.png" /></p>
            <p>To fix this, make sure you added the required field to your Application User profile and provide it with a valid value.</p>
        </li>

        <li><p>Set a wrong value to a field, for which valid values are strictly defined:</p>
            <p><img src="images/apps/concur11.png" alt=“concur11.png" /></p>
            <p>To fix this, provide a field with a valid value. Check Schema Discovery section on how to get valid values.</p>
        </li>
    </ul>
    <hr>
    <a name="migration"></a><h2>Migration from Legacy Concur Application to Universal Directory</h2>

    <p>In order to enable UD support for Concur:</p>
    <ol>
        <li><p>Contact Okta support team and request the following feature flag be enabled for your Okta org: <strong>PROV_CONCUR_CLOUD_DIRECTORY_ENABLE</strong>.</p></li>
        <li><p>Once the feature is enabled, add a new instance of the Concur App.
            <p><strong>Note</strong>: We do not recommend reusing your existing instance of the Concur app for UD features.</p></li>
        <li><p>Follow the steps above to configure the new application powered with UD features.</p></li>

</div>
</body>
</html>
