<html>
<head>
    <link href="resources/css/doc-style.css" media="all" rel="stylesheet" type="text/css" />
    <script src="//use.typekit.net/jff5neq.js" type="text/javascript"></script>
    <script type="text/javascript">
        try{Typekit.load();}catch(e){}
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="resources/scripts/vkbeautify.js"></script>

    <title>Setup SSO</title>

    <script src="resources/scripts/getAppValues.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div class="header clearfix">
    <div class="logo-container">
        <img src="resources/css/okta-logo-white.png" alt="Okta" />
    </div>
</div>
<div class="okta-instructions">
<h1>How to Configure SAML 2.0 for Veeva</h1>
    <div id="loginAdminApp" class="okta-callout okta-error" style="display: none;"><span class="icon-24 icon-error"></span>
        <p>This setup might fail without parameter values that are customized for your organization. Please use the Okta Administrator Dashboard to add an application and view the values that are specific for your organization.</p>
    </div>
    <h2>Go to the Single Sign-On Settings page in Veeva</h2>
    <ol>
        <li>
            <p>Log in to Veeva with the same administrator username and password-token used for User Management settings.</p>
        </li>
        <li>
            <p>Click on&nbsp;<strong>Setup</strong></p>
        </li>
        <li>
            <p>Click&nbsp;<strong>Security Controls</strong>&nbsp;to open the sub-menu<br /><img src="images/apps/veeva-setup.png" alt="veeva-setup.png" /></p>
        </li>
        <li>
            <p>Click&nbsp;<strong>Single Sign-On Settings</strong></p>
        </li>
    </ol>
    <h2>On the Single Sign-On Settings page</h2>
    <ol>
        <li>
            <p>Click the&nbsp;<strong>Edit</strong>&nbsp;button to display a form similar to the page shown on the right →</p>
        </li>
        <li>
            <p>Check&nbsp;<strong>SAML Enabled</strong>&nbsp;and a form will display</p>
        </li>
        <li>
            <p>Set the&nbsp;<strong>SAML Version</strong>&nbsp;to&nbsp;<strong>2.0</strong></p>
        </li>
        <li>If you have Multiple&nbsp;End-points enabled, the configuration page may ask you to setup a&nbsp;<strong>Name</strong>&nbsp;and&nbsp;<strong>API Name</strong>. Set these values according to your preference.</li>
        <li>
            <p>Download your Okta Identity Provider Certificate so you can upload it in the <strong>Identity Provider Certificate</strong>&nbsp;field</p>
            <kbd id="downloadCertificate"> Sign in to the Okta Admin app to have this variable generated for you </kbd></li>
        <li>
            <p>Copy and paste the following key into&nbsp;<strong>Issuer</strong>:</p>
            <kbd id="issuer">Sign into the Okta Admin dashboard to generate this value.</kbd></li>
        <li class="optional">
            <p><strong>(Optional)</strong>&nbsp;Copy and paste the following URL into&nbsp;<strong>Identity Provider Login URL</strong>:</p>
            <kbd id="signOnUrl">Sign into the Okta Admin dashboard to generate this value.</kbd>
            <p>This URL will authenticate your users when they attempt to log in directly to Veeva or click on a deep link in Veeva and are not currently authenticated.</p>
        </li>
        <li class="optional">
            <p><strong>(Optional)</strong>&nbsp;Copy and paste the following URL into&nbsp;<strong>Identity Provider Logout URL</strong>:</p>
            <kbd id="signOutUrl">Sign into the Okta Admin dashboard to generate this value.</kbd>
            <p>This URL sends your users to their Okta home page when they log out of Veeva.</p>
        </li>
        <li>
            <p>Set the&nbsp;<strong>SAML User ID Type</strong>&nbsp;to&nbsp;<strong>Assertion contains User's Veeva username</strong></p>
        </li>
        <li>
            <p>Set the&nbsp;<strong>SAML User ID Location</strong>&nbsp;to&nbsp;<strong>User ID is in the NameIdentifier element of the Subject statement</strong></p>
        </li>
        <li>For<strong> Entity ID,</strong></li>
    </ol>
    <ul>
        <li>If you have custom domain setup, use <strong>https://&lt;customDomain&gt;.my.salesforce.com</strong></li>
        <li>If&nbsp;you do not have a custom domain setup, use&nbsp;<strong>https://saml.salesforce.com</strong></li>
    </ul>
    <ol>
        <li>For <strong>Service Provider Initiated Request Binding</strong>, select&nbsp;<strong>HTTP POST&nbsp;</strong><em>(Depending on the Salesforce environment you are in, you may or may not be asked for this value)</em></li>
        <li>Click&nbsp;<strong>Save</strong></li>
        <li>Look&nbsp;for the&nbsp;<strong>Salesforce Login URL</strong>&nbsp;which will appear after clicking&nbsp;Save<br /><img src="images/apps/Screen+Shot+2014-03-21+at+9.46.22+AM.png" alt="Screen_Shot_2014-03-21_at_9.46.22_AM.png" /></li>
        <li>In Okta, go&nbsp;to the General tab of the app Configuration page shown below, and enter the&nbsp;<strong>Salesforce Login URL</strong>&nbsp;in the&nbsp;<strong>Login URL&nbsp;</strong>field.&nbsp;<br /><img src="images/apps/Screen+Shot+2014-03-21+at+10.05.15+AM.png" alt="Screen_Shot_2014-03-21_at_10.05.15_AM.png" /></li>
        <li>If you&nbsp;are using a custom domain, then enter that value in the&nbsp;<strong>Custom Domain</strong>&nbsp;field in Okta, otherwise leave it blank.</li>
        <li>Click Save</li>
        <li>Done!</li>
    </ol>
    <h2>How to Configure Delegated Authentication in Veeva</h2>
    <div class="okta-callout okta-info">
        <span class="icon-24 icon-info"></span>
        <p>Please note:&nbsp;Delegated authentication is an optional integration that can be used in addition to SAML 2.0.</p>
    </div>
    <div class="okta-callout okta-info">
        <span class="icon-24 icon-info"></span>
        <ul>
            <li>
                <h2>What does this feature do?</h2>
                <p>Delegated authentication enables various integrations with Veeva — like the Microsoft Outlook plugin — as well as giving you the ability to lock a user out of Veeva. Unlike SAML 2.0 single sign-on, delegated authentication is turned on at the user profile level. You have the ability to enable delegated authentication for a single user or large group; it all depends on who has the user profile where the&nbsp;<strong>Is Single Sign-On Enabled</strong>&nbsp;permission is enabled.</p>
            </li>
            <li>
                <h2>Where can I find this feature in my version of Veeva?</h2>
                <p>You can't see this form until Veeva has enabled delegated authentication for your organization. Once enabled, the delegated authentication form is located on the<strong>Single Sign-On Settings</strong>&nbsp;page in Veeva — the same place where you configure SAML 2.0.</p>
            </li>
        </ul>
    </div>
    <h2>Contact Veeva to enable delegated authentication</h2>
    <ol>
        <li>
            <p>Contact your Veeva Systems Account representative and ask them to enable&nbsp;<strong>delegated authentication</strong>&nbsp;for your organization. You can also do this by opening a case in the Veeva systems&nbsp;<a href="https://na3.salesforce.com/sserv/login.jsp?orgId=00D500000007dqn">customer service application</a></p>
            <p>Once Veeva systems enables delegated authentication you can proceed with the steps below.</p>
        </li>
    </ol>
    <h2>Enter your Delegated Gateway URL</h2>
    <ol>
        <li>
            <p>Go to the&nbsp;<strong>Single Sign-On Settings</strong>&nbsp;page located in the&nbsp;<strong>Setup</strong>&nbsp;&gt;&nbsp;<strong>Security Controls</strong>&nbsp;section of Veeva. Click the&nbsp;<strong>Edit</strong>&nbsp;button to display a form similar to the page shown on the right →</p>
        </li>
        <li>
            <p>Copy and paste the URL below into the&nbsp;<strong>Delegated Gateway URL</strong>&nbsp;field:</p>
            <kbd id="delAuthUrl"> Sign in to the Okta Admin app to have this variable generated for you </kbd></li>
        <li class="important">
            <p>Click&nbsp;<strong>Save</strong></p>
        </li>
    </ol>
    <h2>Tryout delegated authentication single sign-on with a cloned user profile</h2>
    <ol>
        <li>
            <p>We recommend creating a test user profile so you can experiment with this feature on a single user. If you feel comfortable with this feature then you can skip to the next section.</p>
        </li>
        <li>
            <p>Go to the&nbsp;<strong>Profiles</strong>&nbsp;page located in the&nbsp;<strong>Setup</strong>&nbsp;&gt;&nbsp;<strong>Manage Users</strong>&nbsp;section of Veeva</p>
        </li>
        <li>
            <p>Open a User Profile you would like to experiment with</p>
        </li>
        <li>
            <p>Click the&nbsp;<strong>Clone</strong>&nbsp;button to make a copy of this profile. Using a cloned profile allows you to avoid impacting any other users who have the original profile.</p>
        </li>
        <li>
            <p>Give the cloned profile a name</p>
        </li>
        <li class="important">
            <p>Click&nbsp;<strong>Save</strong></p>
        </li>
    </ol>
    <h2>Enable delegated authentication single sign-on for a user profile</h2>
    <p><strong>IMPORTANT</strong>: Enabling single sign-on for a user profile will affect every user who is assigned that user profile. If you want to experiment with a single user first, we reccomend creating a cloned profile (see above) to test with.</p>
    <ol>
        <li>
            <p>Go to the&nbsp;<strong>Profiles</strong>&nbsp;page located in the&nbsp;<strong>Setup</strong>&nbsp;&gt;&nbsp;<strong>Manage Users</strong>&nbsp;section of Veeva</p>
        </li>
        <li>
            <p>Click&nbsp;<strong>Edit</strong>&nbsp;on the user profile and scroll down to the&nbsp;<strong>General User Permissions</strong>&nbsp;section</p>
        </li>
        <li>
            <p>Check the&nbsp;<strong>Is Single Sign-On Enabled</strong>&nbsp;checkbox</p>
        </li>
        <li class="important">
            <p>Click&nbsp;<strong>Save</strong></p>
        </li>
    </ol>
    <h2>Enable delegated authentication single sign-on for a Veeva user</h2>
    <ol>
        <li>
            <p><strong>IMPORTANT</strong>: Do not enable delegated authentication for the Veeva user used by Okta to connect to the Veeva User Management APIs. The API user is specified in the User Management settings page within Okta.</p>
        </li>
        <li>
            <p>Go to the&nbsp;<strong>Users</strong>&nbsp;page located in the&nbsp;<strong>Setup</strong>&nbsp;&gt;&nbsp;<strong>Manage Users</strong>&nbsp;section of Veeva</p>
        </li>
        <li>
            <p>Click&nbsp;<strong>Edit</strong>&nbsp;for a user you want to enable single sign-on for</p>
        </li>
        <li>
            <p>Select a&nbsp;<strong>Profile</strong>&nbsp;that has delegated authentication single sign-on enabled (use the cloned profile if you are experimenting)</p>
        </li>
        <li class="important">
            <p>Click&nbsp;<strong>Save</strong></p>
        </li>
    </ol>
    <h2>Assign your single sign-on enabled Veeva user to an Okta user</h2>
    <ol>
        <li>
            <p>In Okta, go to the People list and click a person's name to open their profile</p>
        </li>
        <li>
            <p>Click&nbsp;<strong>Assign Application</strong></p>
        </li>
        <li>
            <p>Select&nbsp;<strong>Veeva</strong>&nbsp;from the list and&nbsp;<strong>enter a Veeva username that has delegated authentication enabled</strong></p>
        </li>
        <li class="important">
            <p>Click&nbsp;<strong>Save</strong></p>
        </li>
    </ol>
    <h2>Test it out!</h2>
    <ol>
        <li>
            <p><a class="action" href="https://login.salesforce.com/" target="_blank">CLICK HERE</a>&nbsp;to go to the Veeva login page</p>
        </li>
        <li>
            <p>Enter the&nbsp;<strong>Veeva username</strong>&nbsp;you used in the previous section</p>
        </li>
        <li>
            <p>Enter the&nbsp;<strong>Okta password</strong>&nbsp;for the Okta user assigned the&nbsp;<strong>Veeva username</strong>&nbsp;above</p>
        </li>
        <li class="important">
            <p>Click&nbsp;<strong>Login</strong></p>
        </li>
        <li>
            <p>Assuming you logged in successfully, you can use these credentials for Veeva client application integrations like the Microsoft Outlook plugin and other APIs.</p>
        </li>
    </ol>
    <h2>Done!</h2>
    <ol>
        <li>
            <p>Your users are ready to single sign-on to Veeva!</p>
            <p>You can assign Veeva access to users from their user profile within Okta.</p>
        </li>
    </ol>
</div>
</body>
</html>
