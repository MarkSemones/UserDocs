<html>
<head>
<link href="../resources/css/doc-style.css" media="all" rel="stylesheet" type="text/css" />
<script src="../resources/js/jff5neq.js" type="text/javascript"></script>
<script type="text/javascript">
try{Typekit.load();}catch(e){}
</script>
<script src="../resources/js/jquery.min.js"></script>
<script src="../resources/js/vkbeautify.js"></script>
<title>Setup SSO</title>

<script src="../resources/js/getAppValues.js"></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div class="header clearfix">
        <div class="logo-container">
            <img src="../resources/img/okta-logo-white.png" alt="Okta" />
        </div>
    </div>
<div class="okta-instructions">
<h1>How to Configure SAML 2.0 for Amazon Web Service</h1>
<div id="loginAdminApp" class="okta-callout okta-error" style="display: none;"><span class="icon-24 icon-error"></span>
<p>This setup might fail without parameter values that are customized for your organization. Please use the Okta Administrator Dashboard to add an application and view the values that are specific for your organization.</p>
</div>
<h2>Before you begin</h2>
<div class="okta-callout okta-warning"><span class="icon-24 icon-warning"></span>
<h3><strong>Read this before you enable SAML</strong></h3>
<p>You need to enable <strong>Provisioning</strong> in order to configure SAML for  the app, and to support multiple roles per chiclet. The Provisioning functionality has also been extended to <strong>Okta SSO Edition</strong> and <strong>Okta SSO Plus Edition</strong> for the Amazon Web Services Application. </p>
</div>
<ol>
<li>Sign into AWS and go to <strong>Security Credentials</strong> and click on <strong>Identity Providers</strong>.
<li>Select <strong>Create SAML Provider</strong>, as shown below.<br /><br /><img style="border: 0; padding: 0;" src="images/apps/Amazon_AWS_0.png" alt="Amazon_AWS_0.png" width="722" height="114" /></li>
<li>
<p>Save the following&nbsp;<strong>IDP metadata</strong>&nbsp; as a .xml file, and upload in AWS when prompted.<br /><br /><pre id="idpMetadata">Sign into the Okta Admin dashboard to generate this value.</pre></p>
</li>
<li>
<p>&nbsp;Once the new Identity Provider is created, be sure to copy the <strong>Provider ARN</strong> when it displays, as shown below.<br /><br /><img style="border: 0; padding: 0;" src="images/apps/Amazon_AWS_1.png" alt="Amazon_AWS_1.png" width="690" height="396" /></p>
</li>
<li>
<p>Select <strong>Roles</strong> from the list on the left, and then select <strong>Create New Role</strong> at the top.&nbsp;<br /><br />Provide a friendly name for your role. For Role Type, select <strong>Role For Identity Provider Access,</strong> and then select <strong>Grant Web Single Sign-On (web SSO) access to SAML provider</strong>, as shown below.<br /><br /><img style="border: 0; padding: 0;" src="images/apps/Amazon_AWS_4.png" alt="Amazon_AWS_4.png" /></p>
<p><strong>Note:</strong> If you already have an existing role with the type <strong>Grant Web Single Sign-On (web SSO) access to SAML providers</strong>, you can modify it to work with the SAML provider you just created in the previous step.</p>
</li>
<li>
<p>Verify the role trust policy. Choose the access policy, such as permissions, that federated users will inherit when using this role.</p>
</li>
<li>
<p>Review your settings, and then select <strong>Create Role</strong>. You should be able to see the new role, as shown below.<br /><br /><img style="border: 0; padding: 0;" src="images/apps/Amazon_AWS_3.png" alt="Amazon_AWS_3.png" /><br /><br /></p>
</li>
<li>In Okta, enter the Provider ARN that you copied in step 3 into the&nbsp;&nbsp;<strong>Identity Provider ARN (Amazon Resource Name)</strong>&nbsp;field, as shown below.<br /><img style="border: 0; padding: 0;" src="images/apps/Amazon_AWS_6.png" alt="Amazon_AWS_6.png" /></li>




<li>In Okta, enable Provisioning for your app, and assign users. Specify the role as the role that you created in step 6, as shown below:</p>
<p><img style="border: 0; padding: 0;" src="images/apps/amazon_new1.png" alt=“amazon_new1.png" /></p>
<p>To generate new Access Keys for <strong>Amazon Web Services</strong>:</p>
<ul>
<li><p>Login to your Amazon Web Services account as an Administrator, click on your username at the top of the page, then select <strong>Security Credentials</strong>:</p>
<p><img style="border: 0; padding: 0;" src="images/apps/amazon_new2.png" alt=“amazon_new2.png" /></p>

</li>
<li><p>Click on <strong>Access Keys (Access Key ID and Secret Access Key)</strong> to expand section with Access and Security keys, then click <strong>Create New Access Key button</strong>:</p>
<p><img style="border: 0; padding: 0;" src="images/apps/amazon_new3.png" alt=“amazon_new3.png" /></p>


</li>
<li><p>A dialog with newly created keys appears. Click on <strong>Show Access Key</strong> link to expand the generated keys. Either make a copy of them or use the <strong>Download Key File</strong> option. These keys are required to setup Provisioning in Okta:</p>
<p><img style="border: 0; padding: 0;" src="images/apps/amazon_new4.png" alt=“amazon_new4.png" /></p>

</li>





</ul>
</li>




<li>
<p dir="ltr">Optionally, you can specify the region that your users sign in to. To specify a region, on the Okta Dashboard for the Amazon Web Services application, select the <strong>Sign On</strong> tab. Enter one of the values shown below in the&nbsp;<strong>Default Relay State&nbsp;</strong>field. Continue to Step 11.</p>



<table style="width: 1000px; height: 152px; border-collapse: collapse;" border="1" cellspacing="5" cellpadding="5" align=“left”>
<tbody>
<tr>
<td align=“left”><strong>Region</strong></td>
<td align=“left”><strong>Default Relay State</strong></td>
</tr>
<tr>
<td align=“left”>US East (N. Virginia)</td>
<td align=“left”>https://us-east-1.console.aws.amazon.com/console/home</td>
</tr>
<tr>
<td align=“left”> US West (Oregon) </td>
<td align=“left”> https://us-west-2.console.aws.amazon.com/console/home </td>
</tr>
<tr>
<td align=“left”>EU (Ireland) </td>
<td align=“left”>https://eu-west-1.console.aws.amazon.com/console/home</td>
</tr>
</tbody>
</table>
</li>
<li>Done!</li>
</ol></div>
</body>
</html>
