<html>
<head>
<link href="resources/css/doc-style.css" media="all" rel="stylesheet" type="text/css" />
<script src="//use.typekit.net/jff5neq.js" type="text/javascript" />-->
<script type="text/javascript">
try{Typekit.load();}catch(e){}
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<title>Setup SSO</title>

<!-- <script> src=”resources/scripts/getAppValues.js” ></script> -->

<script>
function processData(data) {
  $('#signOnUrl').html(data["signOnUrl"]);
  $('#signOutUrl').html(data["signOutUrl"]);
  $('#changePasswordUrl').html(data["changePasswordUrl"]);
  $('#downloadCertificate').html('<a href="' + data["idpCertDownload"] + '">' + data["idpCertDownload"] + '</a>');
   $('#downloadCertificatePem').html('<a href="' + data["idpCertDownload"] + '?fileExtension=pem">' + data["idpCertDownload"] + '</a>');
  $('#idpMetadata').html(data["idpMetadata"]);
  $('#x509CertText').html(data["x509CertText"]);
  $('#x509CertTextPem').html(data["x509CertTextPem"]);
  $('#x509CertTextPem').css("white-space", "pre");
  $('#certFingerPrint').html(data["certFingerPrint"]);
  $('#validFrom').html(data["validFrom"]);
  $('#validTo').html(data["validTo"]);
  $('#issuer').html(data["issuer"]);
$('#metadataUrl').html(data["signOnUrl"]);
 $('#errorUrl').html(data["signOutUrl"]);
 $('#timeoutUrl').html(data["signOutUrl"]);
 $('#delAuthUrl').html(data["delAuthUrl"]);
 $('#saml11SignOnUrl').html(data["saml11SignOnUrl"]);    
}
function getURLParameter(name) {
    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
}
$(document).ready(function($) {
  // This condition is to ensure that the ajax api code is executed only on the intended pages
  if ($('#loginAdminApp').length > 0) {
    var app = getURLParameter('app');
    var subdomain = getURLParameter('subdomain');
    var instanceId = getURLParameter('instanceId');
    var baseAdminUrl = getURLParameter('baseAdminUrl');
    var url;
    if ((subdomain == null && baseAdminUrl == null) || app == null || instanceId == null) {
      $('#loginAdminApp').show();
    } else {
      var endpoint = '/api/internal/v1/setup/help/saml/' + app + '/' + instanceId + '?callback=processData';
      if (baseAdminUrl) {
        url = baseAdminUrl + endpoint;
      } else if (subdomain) {
        url = 'https://' + subdomain + '.okta-admin.com' + endpoint;
      }
      $.ajax({
        type: 'GET',
        url: url,
        jsonp: false,
        jsonpCallback: 'processData',
        dataType: 'jsonp',
        success: function(json) {
          $('#loginAdminApp').hide();
        },
        error: function(e,jqXHR,ajaxSettings,thrownError) {
          $('#loginAdminApp').show();
        },
        timeout: 3000
      });
    }
  }

  
  $('#mailto').on('click', function() {
      var to = "DedicatedSAMLComplaintLine@okta.com"; // I am assuming this will always be same!
      var body = "Dear Okta,%0D%0A%0D%0AI used your SAML setup instruction. I want you to know…%0D%0AI completed the SAML setup?%0D%0AI found errors in this doc?%0D%0A%0D%0AHere’s what I noticed:";
      var subject = "Update Doc:" + $('h1').text();       
      var mailto = "mailto:" + to + "?subject=" + subject + "&body=" + body;
      window.location.href = mailto;
    });

});
</script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div class="header clearfix">
        <div class="logo-container">
            <img src="resources/css/okta-logo-white.png" alt="Okta" />
        </div>
    </div>

<div class="okta-instructions">
<div id="loginAdminApp" class="okta-callout okta-danger" style="display: none;">
<p><strong>This setup might fail without parameter values that are customized for your organization. Please use the Okta Administrator Dashboard to add an application and view the values that are specific for your organization.</strong></p>
</div>
<p>&nbsp;</p>
<ol>
<li>Log in to <a href="http://www.panorama9.com/sign-in">Panorama9</a> and select&nbsp;<strong>Manage &gt; Extensions &gt; Single Sign-on</strong>.<strong><br /><img src="/attachments/token/kplzjopy5tizxdf/?name=Screen+Shot+2014-01-14+at+3.03.27+PM.png" alt="Screen_Shot_2014-01-14_at_3.03.27_PM.png" /><br /></strong></li>
<li>Enter the x509 <strong>Certificate</strong> <strong>Fingerprint</strong>. <br />Use the fingerprint below and convert it to the format Panorama9 requires. Change all letters in the fingerprint below to upper case and insert colons after every second character. For example, if the fingerprint below were&nbsp;<strong>1x2y3z</strong>,&nbsp;change it to <strong>1X:2Y:3Z</strong> using a text editor, before pasting it into the form.&nbsp;<kbd id="certFingerPrint">Sign in to the Okta Admin&nbsp;<span>app to generate this variable.</span></kbd></li>
<li>Enter the<strong> Login URL</strong> shown below.&nbsp;<kbd id="signOnUrl"> Sign in to the Okta Admin app to generate this variable.</kbd></li>
<li><strong>&nbsp;</strong>Check <strong>Single Sign-on</strong> and then click&nbsp;<strong>Save</strong>.<br /><img src="/attachments/token/eyzmjzgbng9m9xo/?name=Screen+Shot+2014-01-14+at+3.16.35+PM.png" alt="Screen_Shot_2014-01-14_at_3.16.35_PM.png" /><br /><br /></li>
<li>Note the four-digit numeric ID at the end of your<strong> Panorama Login URL</strong> provided under the Single Sign-on Settings. You will need to input this value while setting up the Panorama9 app instance in Okta, to implement SAML to work. The value is 5244 in the example below.<br /><img src="/attachments/token/dkh190s2y5zxepz/?name=Screen+Shot+2014-01-14+at+3.19.15+PM.png" alt="Screen_Shot_2014-01-14_at_3.19.15_PM.png" /></li>
<li>Once you have set up Panorama9 in Okta, you can use the <strong>Panorama Login URL</strong> to use SAML to access your account using the SP-initiated flow. You can also click the Panorama9 chiclet on your Okta dashboard use SAML to access your account using the IDP-initiated flow.&nbsp;</li>
<li>Done!</li>
</ol></div>
</body>
</html>
