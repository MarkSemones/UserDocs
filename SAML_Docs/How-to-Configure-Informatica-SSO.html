<html>
<head>
<link href="../resources/css/doc-style.css" media="all" rel="stylesheet" type="text/css" />
<script src="../resources/js/jff5neq.js" type="text/javascript"></script>
<script type="text/javascript">
try{Typekit.load();}catch(e){}
</script>
<script src="../resources/js/jquery.min.js"></script>
<script src="../resources/js/vkbeautify.js"></script>
<title>Setup SSO</title>

<script src="../resources/js/getAppValues.js"></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div class="header clearfix">
        <div class="logo-container">
            <img src="../resources/img/okta-logo-white.png" alt="Okta" />
        </div>
    </div>
<div class="okta-instructions">
<h1>How to Configure SAML 2.0 for Informatica SSO</h1>
<div id="loginAdminApp" class="okta-callout okta-error" style="display: none;"><span class="icon-24 icon-error"></span>
<p>This setup might fail without parameter values that are customized for your organization. Please use the Okta Administrator Dashboard to add an application and view the values that are specific for your organization.</p>
</div>
<p>To enable SAML, send an email to your SaaS vendor as described below:</p>
<p>&nbsp;</p>
<ol>
<li>Copy and paste the fields below into an email and send to Informatica:</li>
<ul>
<li><strong>Subject</strong></li>
<kbd class="margin-btm-10"> Enabled inbound SSO for <strong>Org</strong></kbd>
<p>&nbsp;</p>
<kbd class="margin-btm-10"> Please enable Okta for inbound SSO access to company <strong>Org</strong> <br /> The administrator for this account is <strong>AdminEmail</strong> <br /> <br /> The API endpoint URL has to be copied has to the okta.ini. The value is assign to the serviceURL.PROD field. <br /> <strong><kbd id="informaticaApiUrl">Sign in to the Okta Admin app to have this variable generated for you.</kbd></strong> <br /><br /> Login Redirect URL, sends an authentication request back to Okta. <br /> <kbd id="signOnUrl">Sign in to the Okta Admin app to have this variable generated for you.</kbd> </kbd>
<li><strong>Org</strong> - Name of the company</li>
<li><strong>AdminEmail</strong> - Adminstrator's email for the company</li>
<li><strong>SSOUrl</strong></li>
<kbd id="signOnUrl">Sign in to the Okta Admin app to have this variable generated for you.</kbd>
<li><strong>ExternalKey</strong></li>
<kbd id="externalKey">Sign in to the Okta Admin app to have this variable generated for you.</kbd></div>
<script type="text/javascript">// <![CDATA[
function egenciaProcessData(data) {
  jQuery('#signOnUrl').html(data["signOnUrl"]);
  jQuery('#metadataUrl').html(data["signOnUrl"]);
  jQuery('#signOutUrl').html(data["signOutUrl"]);
  jQuery('#errorUrl').html(data["signOutUrl"]);
  jQuery('#timeoutUrl').html(data["signOutUrl"]);
  jQuery('#changePasswordUrl').html(data["changePasswordUrl"]);
  jQuery('#downloadCertificate').html('<a href="' + data["idpCertDownload"] + '">' + data["idpCertDownload"] + '</a>');
  jQuery('#idpMetadata').html(data["idpMetadata"]);
  jQuery('#x509CertText').html(data["x509CertText"]);
  jQuery('#certFingerPrint').html(data["certFingerPrint"]);
  jQuery('#validFrom').html(data["validFrom"]);
  jQuery('#validTo').html(data["validTo"]);
  jQuery('#issuer').html(data["issuer"]);
  jQuery('#delAuthUrl').html(data["delAuthUrl"]);
  jQuery('#saml11SignOnUrl').html(data["saml11SignOnUrl"]);
  var baseAdminUrl = getURLParameter('baseAdminUrl');
  var informaticaApiUrl = baseAdminUrl.replace('-admin','') + '/api/1/app/informatica_sso/sso';
  jQuery('#informaticaApiUrl').html(informaticaApiUrl);
}

function getURLParameter(name) {
    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
}

(function($) { 
  // This condition is to ensure that the ajax api code is executed only on the intended pages
  if ($('#informaticaApp').length > 0) {
    var app = getURLParameter('app');
    var subdomain = getURLParameter('subdomain');
    var instanceId = getURLParameter('instanceId');
    var baseAdminUrl = getURLParameter('baseAdminUrl');
    var url;

    if ((subdomain == null && baseAdminUrl == null) || app == null || instanceId == null) {
      $('#informaticaApp').show();
    } else {
      var endpoint = '/api/internal/v1/setup/help/saml/' + app + '/' + instanceId + '?callback=egenciaProcessData';
      if (baseAdminUrl) {
        url = baseAdminUrl + endpoint;
      } else if (subdomain) {
        url = 'https://' + subdomain + '.okta-admin.com' + endpoint;
      }

      $.ajax({
        type: 'GET',
        url: url,
        jsonp: false,
        jsonpCallback: 'egenciaProcessData',
        dataType: 'jsonp',
        success: function(json) {
          $('#informaticaApp').hide();
        },
        error: function(e,jqXHR,ajaxSettings,thrownError) {
          $('#informaticaApp').show();
        },
        timeout: 3000
      });
    }
  }
})(jQuery);
// ]]></script>
</ul>
</ol>
</body>
</html>
